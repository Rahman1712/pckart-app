<main id="main" class="main">
  <div class="pagetitle">
    <h1>Product Details</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/dashboard" routerLinkActive="active">Home</a></li>
        <li class="breadcrumb-item"><a routerLink="/product-category/{{parentCategoryName}}" routerLinkActive="active">{{parentCategoryName}}</a>
        </li>
        <li class="breadcrumb-item"><a routerLink="/product-category/{{parentCategoryName}}/{{categoryName}}" routerLinkActive="active">{{categoryName}}</a>
        </li>
        <li class="breadcrumb-item active"><b>{{productDto.productResponse.productName}}</b></li>
      </ol>
    </nav>
  </div>

  <section class="section">

    <div class="container mt-1">
      <div class="row">
        <div class="col-6 p-0">
          
          <div class="card image-container p-3">
            
            <img [src]="productDto.productResponse!.allImages[selectedProductIndex].url" alt="PIC" class="product-zoom-image" id="zoom-image">

                <!-- <lib-ngx-image-zoom
                  [thumbImage]=myThumbnail
                  [fullImage]= myFullResImage
                  [magnification]="1"
                  [enableScrollZoom]="true"
                  [enableLens]="true"
                  [lensWidth]="200"
                  [lensHeight]="100"
              ></lib-ngx-image-zoom> -->
          </div>
          <div class="mt-2">
            <mat-grid-list cols="4" gutterSize="10" rowHeight="1:1">
              <mat-grid-tile *ngFor="let file of productDto.productResponse.allImages; let i = index;" (click)="changeIndex(i)" style="border: 1px solid lightgrey; cursor: pointer;">
                <img [src]="file.url" alt="IMG"  class="img-fluid">
              </mat-grid-tile>
            </mat-grid-list>
          </div>
        </div>
        <div class="col-6">
          <div class="product-information">
            <div class="mt-3">
              <p>
                  <b>Name :</b>
                  {{productDto.productResponse.productName}}
              </p>
            </div>
            <div>
              <p>
                <b>Brand :</b> &nbsp; {{productDto.productResponse.brandName}}
              </p>
              <p>
                <b>Category :</b>  &nbsp; {{productDto.productResponse.categoryName}}
              </p>
              <p>
                <b>Color :</b>&nbsp; {{productDto.productResponse.productColor}}
              </p>
            </div>
            <div>
              <p>
                <b>Price :</b>&nbsp; ${{productDto.productResponse.productPrice}}
              </p>
            </div>
            <div>
              <p>
                <b>Discounted Price :</b>&nbsp; 
                <span>
                  ${{productDto.productResponse!.productPrice - (productDto.productResponse!.productPrice  *productDto.productResponse!.productDiscount/100)}}
                </span>
                &nbsp;
                <span>
                  <small>({{productDto.productResponse!.productDiscount}}% discount) </small>
                </span>
              </p>
            </div>
            <div>
              <p>
                <b>In stock :</b>&nbsp; {{productDto.productResponse.productQuantity}} products
              </p>
            </div>
            <!-- <div>
              <p>
                <b>Added at :</b>&nbsp; {{productDto.productResponse.added_at}}
              </p>
            </div> -->
            <div>
              <b>Description :</b>
              <p class="py-1">
                {{productDto.productResponse.productDescription}}
              </p>
            </div>
            <div>
              <b>Specifications :</b>
              <div *ngIf="productDto.productResponse.productSpecs.length>0 ; else elseBlock;">
                <ul *ngFor="let specification of productDto.productResponse.productSpecs">
                  <li *ngIf="specification.specs_key">
                    <b>{{specification.specs_key}} :</b>&nbsp;
                    {{specification.specs}}</li>
                </ul>
              </div>
              <ng-template #elseBlock>
                  <p class="text-danger p-2"> No Specifications Added</p>
              </ng-template>
            </div>
            <div class="mt-5 text-center">
              <!-- <button mat-raised-button class="mx-1" routerLink="/product-category/{{parentCategoryName}}/{{categoryName}}" routerLinkActive="active"> Back </button> -->
              <button mat-raised-button color="warn" class="mx-1" (click)="productAddToCart(productDto)"> Add To Cart </button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>

</main>


